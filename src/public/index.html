<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="LDAP testing" />
    <meta name="author" content="Jingshao Chen" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />

    <title>Testing Page for express-passport-ldap-mongoose</title>

    <!-- Custom styles for this template -->
    <link href="signin.css" rel="stylesheet" />

    <script>
      function login() {
        var username = document.getElementById('username').value
        var password = document.getElementById('password').value

        var url = '/login'
        var data = { username: username, password: password }

        fetch(url, {
          method: 'POST', // or 'PUT'
          body: JSON.stringify(data),
          headers: new Headers({
            'Content-Type': 'application/json',
          }),
        })
          .then((res) => res.json())
          .catch((error) => alert('unexpected error'))
          .then((response) => {
            if (response.success) {
              alert('Login succeed')
              console.log(response.user)
            } else {
              alert('login failed. Message: ' + response.message)
            }
          })
      }
    </script>
  </head>

  <body class="text-center">
    <div class="container">
      <h1 class="h3 mb-3 fw-normal">
        Testing Page for express-passport-ldap-mongoose
      </h1>
      <main class="form-signin">
        <form>
          <h1 class="h3 mb-3 fw-normal">Sign in</h1>

          <p>
            Use
            <code>gauss</code> and <code>password</code> to test.
          </p>

          <div class="form-floating">
            <input
              type="text"
              id="username"
              name="username"
              autocomplete="username"
              class="form-control"
              placeholder="Username"
              required
              autofocus
            />
            <label for="username">Username</label>
          </div>

          <div class="form-floating">
            <input
              id="password"
              name="password"
              type="password"
              autocomplete="current-password"
              class="form-control"
              placeholder="Password"
              required
            />
            <label for="password">Password</label>
          </div>

          <button
            type="button"
            class="w-100 mt-3 btn btn-lg btn-primary"
            onclick="login();"
          >
            Sign in
          </button>
        </form>
      </main>

      <p class="text-muted small">
        Online LDAP test server provided by
        <a
          href="https://www.forumsys.com/tutorials/integration-how-to/ldap/online-ldap-test-server/"
          >forumsys</a
        >
      </p>
    </div>
  </body>
</html>
